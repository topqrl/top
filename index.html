<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Resonant Ledger</title>
  <meta name="description" content="An interactive, mysterious archive of echoes, threads and visual artifacts — a single-file exploratory experience." />

  <link href="https://fonts.googleapis.com/css2?family=VT323&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#060507; --panel:#0b0b06; --accent:#8ff3d1; --muted:#7b7b7b; --sepia:#6b4f2b; --glass:rgba(255,255,255,0.02);
      --maxw:1200px;
      --ui-size:14px;
    }
    *{box-sizing:border-box}
    html,body{height:100%;}
    body{margin:0;background:radial-gradient(circle at 12% 10%, rgba(18,18,16,0.6), transparent 12%), linear-gradient(180deg,#030303,#0b0b06 82%);color:var(--accent);font-family:'Space Mono','VT323',monospace;overflow-y:auto;padding:28px}

    .wrap{width:min(var(--maxw),96vw);margin:0 auto}
    header{display:flex;align-items:center;gap:16px;padding:12px;border-radius:8px}
    .mark{width:72px;height:72px;border-radius:10px;background:linear-gradient(180deg,#d9d9d9,#bfbfbf);color:var(--panel);display:flex;align-items:center;justify-content:center;font-size:22px}
    h1{margin:0;font-size:30px}
    .lead{color:var(--muted);font-size:13px}

    /* hero canvas area */
    .hero{margin-top:18px;position:relative;border-radius:12px;overflow:hidden;background:linear-gradient(180deg,rgba(255,255,255,0.01),transparent);border:1px solid rgba(255,255,255,0.03);height:420px}
    canvas{display:block;width:100%;height:100%}
    .overlay{position:absolute;inset:0;padding:18px;pointer-events:none}

    /* controls */
    .controls{display:flex;gap:8px;position:absolute;right:18px;top:18px;pointer-events:auto}
    .btn{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--accent);padding:8px 10px;border-radius:6px;cursor:pointer;font-size:13px}

    /* content grid */
    .grid{display:grid;grid-template-columns:1fr 360px;gap:18px;margin-top:18px}
    .archive{background:var(--panel);padding:16px;border-radius:8px;min-height:480px}
    .side{padding:12px;border-radius:8px;background:linear-gradient(180deg,rgba(255,255,255,0.01),rgba(0,0,0,0.03));border:1px solid rgba(255,255,255,0.02)}

    /* threads */
    .thread{padding:12px;border-radius:6px;margin-bottom:12px;background:linear-gradient(180deg,rgba(255,255,255,0.01),transparent);border:1px dashed rgba(255,255,255,0.02);cursor:pointer}
    .thread h3{margin:0;font-size:16px}
    .thread p{margin:8px 0 0 0;color:var(--muted);font-size:13px}

    /* ledger entries */
    .entries{margin-top:8px;display:flex;flex-direction:column;gap:10px}
    .entry{padding:10px;border-radius:6px;background:#071107;border:1px solid rgba(255,255,255,0.02);font-size:14px}

    /* image strip */
    .strip{display:flex;gap:10px;overflow-x:auto;padding:8px 6px;margin-top:12px}
    .thumb{min-width:160px;height:110px;border-radius:6px;overflow:hidden;border:1px solid rgba(255,255,255,0.03);background:#0a0a08;display:flex;align-items:center;justify-content:center;cursor:pointer}
    .thumb img{width:100%;height:100%;object-fit:cover;filter:grayscale(60%) sepia(30%) contrast(90%)}

    /* reveal zone */
    .reveal{margin-top:12px;padding:12px;border-radius:8px;background:linear-gradient(180deg,#071107,#060604);border:1px solid rgba(255,255,255,0.02)}
    .hint{font-size:13px;color:var(--muted)}
    .secret{display:none;margin-top:10px;padding:10px;background:#0e1b1b;border-radius:6px;color:#d9f9ee}
    .secret.open{display:block}

    footer{margin-top:22px;color:var(--muted);font-size:13px;text-align:center}

    @media (max-width:980px){.grid{grid-template-columns:1fr}.side{order:2}}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="mark">R†L</div>
      <div>
        <h1>Resonant Ledger</h1>
        <div class="lead">an exploratory surface of echoes, threads and artifacts — poke, press, and observe.</div>
      </div>
    </header>

    <div class="hero" aria-hidden="false">
      <canvas id="viz"></canvas>
      <div class="overlay">
        <div class="controls">
          <button class="btn" id="scatter">scatter</button>
          <button class="btn" id="weave">weave</button>
          <button class="btn" id="calm">calm</button>
        </div>
      </div>
    </div>

    <div class="grid">
      <section class="archive" id="archive">
        <h2 style="margin:0 0 8px 0">threads</h2>
        <div class="thread" data-id="t1" onclick="openThread('t1')">
          <h3>thread — 01</h3>
          <p>faint footsteps, a ledger entry, a name that keeps returning.</p>
        </div>
        <div class="thread" data-id="t2" onclick="openThread('t2')">
          <h3>thread — 02</h3>
          <p>a photograph with its corner torn; the image seems restless.</p>
        </div>
        <div class="thread" data-id="t3" onclick="openThread('t3')">
          <h3>thread — 03</h3>
          <p>overheard phrase: "count the breaths" — always out of sync.</p>
        </div>

        <div class="entries" id="entries">
          <div class="entry">ledger item: <em>fragment &middot; 04/19</em> — ink stained.</div>
          <div class="entry">ledger item: <em>fragment &middot; 07/02</em> — margin scratched.</div>
        </div>

        <div class="strip" id="strip">
          <div class="thumb" onclick="openImage('thumb1')"><img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='400' height='300'><rect width='100%' height='100%' fill='%23050505'/><text x='20' y='40' fill='%23dcdcdc' font-family='monospace' font-size='18'>scan — 01</text></svg>" alt="scan 1"></div>
          <div class="thumb" onclick="openImage('thumb2')"><img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='400' height='300'><rect width='100%' height='100%' fill='%23030503'/><text x='20' y='40' fill='%23e0e0e0' font-family='monospace' font-size='18'>scan — 02</text></svg>" alt="scan 2"></div>
          <div class="thumb" onclick="openImage('thumb3')"><img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='400' height='300'><rect width='100%' height='100%' fill='%23010706'/><text x='20' y='40' fill='%23e5e5e5' font-family='monospace' font-size='18'>scan — 03</text></svg>" alt="scan 3"></div>
        </div>

        <div class="reveal">
          <div class="hint">interaction log</div>
          <div id="log" class="muted" style="margin-top:8px">no actions recorded yet — touch the canvas or a thread.</div>

          <div class="secret" id="secret">the ledger hums: 'you are not the first to listen'</div>
        </div>

      </section>

      <aside class="side">
        <div style="margin-bottom:12px">
          <div class="muted">controls</div>
          <div style="margin-top:8px">
            <button class="btn" onclick="revealSecret()">reveal</button>
            <button class="btn" onclick="shuffleThreads()">shuffle</button>
            <button class="btn" onclick="clearLog()">clear log</button>
          </div>
        </div>

        <div style="margin-top:12px">
          <div class="muted">notes</div>
          <div style="margin-top:8px;color:var(--muted);font-size:13px">This environment is exploratory. Nothing here instructs or encourages real-world actions — it's a surface for curiosity.</div>
        </div>

        <div style="margin-top:14px">
          <div class="muted">palette</div>
          <div style="display:flex;gap:8px;margin-top:8px">
            <div style="width:28px;height:28px;background:#071107;border-radius:4px"></div>
            <div style="width:28px;height:28px;background:#0b3b34;border-radius:4px"></div>
            <div style="width:28px;height:28px;background:#1f8b79;border-radius:4px"></div>
          </div>
        </div>

      </aside>
    </div>

    <footer>Resonant Ledger — a single-file exploratory prototype · replace images with scans for fuller texture</footer>
  </div>

  <script>
    // -- Interactive visualizer: particle field that reacts to clicks/touches and to the 'threads' --
    const canvas = document.getElementById('viz');
    const ctx = canvas.getContext('2d');
    let DPR = window.devicePixelRatio || 1;

    function resize(){
      const r = canvas.getBoundingClientRect();
      canvas.width = Math.floor(r.width * DPR);
      canvas.height = Math.floor(r.height * DPR);
      ctx.setTransform(DPR,0,0,DPR,0,0);
    }
    window.addEventListener('resize', resize);
    resize();

    // particle system
    const particles = [];
    const MAX = 260;
    function spawn(x,y,count=6){
      for(let i=0;i<count;i++){
        particles.push({x:x + (Math.random()-0.5)*8, y:y + (Math.random()-0.5)*8, vx:(Math.random()-0.5)*1.6, vy:(Math.random()-0.5)*1.6, life:40 + Math.random()*80});
        if(particles.length>MAX) particles.splice(0,particles.length-MAX);
      }
    }

    function draw(){
      ctx.clearRect(0,0,canvas.width/DPR,canvas.height/DPR);
      // subtle grain
      ctx.fillStyle = 'rgba(0,0,0,0.12)'; ctx.fillRect(0,0,canvas.width/DPR,canvas.height/DPR);

      // background veins
      for(let i=0;i<6;i++){
        ctx.beginPath(); ctx.moveTo(i*120 + 30, 20); const cp = 80 + i*30; ctx.quadraticCurveTo(cp,120, canvas.width/DPR - (i*80+60), 220); ctx.strokeStyle = 'rgba(15,40,30,0.04)'; ctx.lineWidth = 1; ctx.stroke();
      }

      // particles
      for(let i=particles.length-1;i>=0;i--){
        const p = particles[i]; p.x += p.vx; p.y += p.vy; p.life -= 1;
        const alpha = Math.max(0, p.life/120);
        ctx.beginPath(); ctx.arc(p.x, p.y, 2.6, 0, Math.PI*2); ctx.fillStyle = 'rgba(143,243,209,'+alpha+')'; ctx.fill();
        if(p.life<=0) particles.splice(i,1);
      }

      requestAnimationFrame(draw);
    }
    draw();

    // interactions
    canvas.addEventListener('pointerdown', (e)=>{
      const r = canvas.getBoundingClientRect(); const x = (e.clientX - r.left); const y = (e.clientY - r.top);
      spawn(x,y,24);
      logAction('canvas touched at ' + Math.round(x) + ',' + Math.round(y));
    });

    // control buttons
    document.getElementById('scatter').addEventListener('click', ()=>{ for(let i=0;i<40;i++) spawn(Math.random()*canvas.width/DPR, Math.random()*canvas.height/DPR, 6); logAction('scatter'); });
    document.getElementById('weave').addEventListener('click', ()=>{ for(let i=0;i<12;i++) spawn(canvas.width/DPR/2 + Math.sin(i/2)*120, canvas.height/DPR/2 + Math.cos(i/2)*120, 8); logAction('weave'); });
    document.getElementById('calm').addEventListener('click', ()=>{ particles.splice(0,particles.length); logAction('calm'); });

    // thread interactions
    function openThread(id){
      const entries = document.getElementById('entries');
      const el = document.querySelector('.thread[data-id="'+id+'"]');
      const title = el.querySelector('h3').textContent;
      const p = document.createElement('div'); p.className='entry'; p.textContent = title + ' — ' + randomFragment();
      entries.insertBefore(p, entries.firstChild);
      spawn(Math.random()*canvas.width/DPR, Math.random()*canvas.height/DPR, 24);
      logAction('opened ' + id);
    }

    function randomFragment(){
      const F = ['ink bleeds', 'teeth marks on edge', 'count the stitches', 'numbers erased', 'a folded corner', 'smudged signature'];
      return F[Math.floor(Math.random()*F.length)];
    }

    // image viewer stub
    function openImage(name){
      logAction('preview ' + name);
      // quick visual feedback by spawning particles near right edge
      spawn(canvas.width/DPR*0.78, canvas.height/DPR*0.3, 32);
    }

    // side controls
    function revealSecret(){ document.getElementById('secret').classList.toggle('open'); logAction('reveal toggled'); }
    function shuffleThreads(){ const threads = Array.from(document.querySelectorAll('.thread')); const parent = threads[0].parentNode; while(threads.length) parent.appendChild(threads.splice(Math.floor(Math.random()*threads.length),1)[0]); logAction('threads shuffled'); }
    function clearLog(){ document.getElementById('log').textContent = 'cleared'; }

    function logAction(s){ const l = document.getElementById('log'); l.textContent = new Date().toLocaleTimeString() + ' — ' + s + '
' + l.textContent; }

    // small seeded animation on load
    setTimeout(()=>{ document.getElementById('weave').click(); }, 600);

    // accessibility: keyboard shortcuts
    window.addEventListener('keydown',(e)=>{
      if(e.key === '1') document.getElementById('scatter').click();
      if(e.key === '2') document.getElementById('weave').click();
      if(e.key === '3') document.getElementById('calm').click();
    });

  </script>
</body>
</html>
